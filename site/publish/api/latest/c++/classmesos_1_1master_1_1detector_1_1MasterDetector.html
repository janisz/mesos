<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Apache Mesos: mesos::master::detector::MasterDetector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Apache Mesos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemesos.html">mesos</a></li><li class="navelem"><a class="el" href="namespacemesos_1_1master.html">master</a></li><li class="navelem"><a class="el" href="namespacemesos_1_1master_1_1detector.html">detector</a></li><li class="navelem"><a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html">MasterDetector</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classmesos_1_1master_1_1detector_1_1MasterDetector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mesos::master::detector::MasterDetector Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>An abstraction of a Master detector which can be used to detect the leading master from a group.  
 <a href="classmesos_1_1master_1_1detector_1_1MasterDetector.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="master_2detector_8hpp_source.html">detector.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mesos::master::detector::MasterDetector:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmesos_1_1master_1_1detector_1_1MasterDetector.png" usemap="#mesos::master::detector::MasterDetector_map" alt=""/>
  <map id="mesos::master::detector::MasterDetector_map" name="mesos::master::detector::MasterDetector_map">
<area href="classmesos_1_1master_1_1detector_1_1StandaloneMasterDetector.html" alt="mesos::master::detector::StandaloneMasterDetector" shape="rect" coords="0,56,299,80"/>
<area href="classmesos_1_1master_1_1detector_1_1ZooKeeperMasterDetector.html" alt="mesos::master::detector::ZooKeeperMasterDetector" shape="rect" coords="309,56,608,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afa29b19a4a659d32db30bedd48198ec3"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html#afa29b19a4a659d32db30bedd48198ec3">~MasterDetector</a> ()=0</td></tr>
<tr class="separator:afa29b19a4a659d32db30bedd48198ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cb69316702ee572983aed9e9e74758"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classprocess_1_1Future.html">process::Future</a><br class="typebreak"/>
&lt; <a class="el" href="classOption.html">Option</a>&lt; MasterInfo &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html#aa3cb69316702ee572983aed9e9e74758">detect</a> (const <a class="el" href="classOption.html">Option</a>&lt; MasterInfo &gt; &amp;previous=<a class="el" href="structNone.html">None</a>())=0</td></tr>
<tr class="memdesc:aa3cb69316702ee572983aed9e9e74758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns MasterInfo after an election has occurred and the elected master is different than that specified (if any), or NONE if an election occurs and no master is elected (e.g., all masters are lost).  <a href="#aa3cb69316702ee572983aed9e9e74758">More...</a><br/></td></tr>
<tr class="separator:aa3cb69316702ee572983aed9e9e74758"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a130e68fdbdc8a1d246c612f39f29a1c7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classTry.html">Try</a>&lt; <a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html">MasterDetector</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html#a130e68fdbdc8a1d246c612f39f29a1c7">create</a> (const <a class="el" href="classOption.html">Option</a>&lt; std::string &gt; &amp;zk, const <a class="el" href="classOption.html">Option</a>&lt; std::string &gt; &amp;masterDetectorModule=<a class="el" href="structNone.html">None</a>())</td></tr>
<tr class="memdesc:a130e68fdbdc8a1d246c612f39f29a1c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a master detector.  <a href="#a130e68fdbdc8a1d246c612f39f29a1c7">More...</a><br/></td></tr>
<tr class="separator:a130e68fdbdc8a1d246c612f39f29a1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An abstraction of a Master detector which can be used to detect the leading master from a group. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="afa29b19a4a659d32db30bedd48198ec3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual mesos::master::detector::MasterDetector::~MasterDetector </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a130e68fdbdc8a1d246c612f39f29a1c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classTry.html">Try</a>&lt;<a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html">MasterDetector</a>*&gt; mesos::master::detector::MasterDetector::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOption.html">Option</a>&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>zk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOption.html">Option</a>&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>masterDetectorModule</em> = <code><a class="el" href="structNone.html">None</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a master detector. </p>
<p>If <code>masterDetectorModule</code> contains a valid module name (that is, a name that matches the name specified in a <a class="el" href="namespaceJSON.html">JSON</a> file/string passed into the command-line invocation using the <code>--modules</code> flag), the result is the <code><a class="el" href="classmesos_1_1master_1_1detector_1_1MasterDetector.html" title="An abstraction of a Master detector which can be used to detect the leading master from a group...">MasterDetector</a></code> returned by the module. Additional parameters required to create an object of the detector type are expected to be specified in the <a class="el" href="namespaceJSON.html">JSON</a>'s <code>parameter</code> object. In command-line invocations, the value of <code>masterDetectorModule</code> is expected to come from the <code>--master_detector</code> flag.</p>
<p>If <code>masterDetectorModule</code> is <code><a class="el" href="structNone.html">None</a></code>, <code>zk</code> is checked and if it contains a valid <code>zk://</code> or <code><a href="file://">file://</a></code> path (passed in using the <code>--master</code> flag), an instance of <a class="el" href="classmesos_1_1master_1_1detector_1_1ZooKeeperMasterDetector.html">ZooKeeperMasterDetector</a> is returned.</p>
<p>If both arguments are <code><a class="el" href="structNone.html">None</a></code>, <code><a class="el" href="classmesos_1_1master_1_1detector_1_1StandaloneMasterDetector.html">StandaloneMasterDetector</a></code> is returned. </p>

</div>
</div>
<a class="anchor" id="aa3cb69316702ee572983aed9e9e74758"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classprocess_1_1Future.html">process::Future</a>&lt;<a class="el" href="classOption.html">Option</a>&lt;MasterInfo&gt; &gt; mesos::master::detector::MasterDetector::detect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOption.html">Option</a>&lt; MasterInfo &gt; &amp;&#160;</td>
          <td class="paramname"><em>previous</em> = <code><a class="el" href="structNone.html">None</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns MasterInfo after an election has occurred and the elected master is different than that specified (if any), or NONE if an election occurs and no master is elected (e.g., all masters are lost). </p>
<p>A failed future is returned if the detector is unable to detect the leading master due to a non-retryable error. Note that the detector transparently tries to recover from retryable errors. The future is never discarded unless it stays pending when the detector destructs.</p>
<p>The 'previous' result (if any) should be passed back if this method is called repeatedly so the detector only returns when it gets a different result. </p>

<p>Implemented in <a class="el" href="classmesos_1_1master_1_1detector_1_1StandaloneMasterDetector.html#a3684f84d3b6c432abc03d3ae378f7b83">mesos::master::detector::StandaloneMasterDetector</a>, and <a class="el" href="classmesos_1_1master_1_1detector_1_1ZooKeeperMasterDetector.html#a96fca42d7f0f6dbbede765e17f169209">mesos::master::detector::ZooKeeperMasterDetector</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/mesos/master/<a class="el" href="master_2detector_8hpp_source.html">detector.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
